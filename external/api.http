//# https://httpyac.github.io/guide/examples para mayor información y documentación
@HOST = http://localhost:5001/api
###
# @name usuarios
# @description get json content of users
//# @note Are you sure?
# @verbose
GET {{HOST}}/users HTTP/1.1

//>> ./usuarios.json

{{
  // post request script
  exports.header = response.headers['content-type'];
  console.log(exports.header)
}}
###

POST {{HOST}}/users HTTP/1.1
Content-Type: application/json

{
  "username" : "usertest2",
  "password" : "password"
}
###

POST {{HOST}}/users/register HTTP/1.1
Content-Type: application/json

{
  "name": "Ernesto",
  "lastname": "Mendoza Rojas",
  "username" : "user_test3",
  "password" : "password",
  "isAdmin" : true
}
###
POST {{HOST}}/users/register HTTP/1.1
Content-Type: application/json

{
  "username" : "user_test",
  "password" : "password",
  "isAdmin" : true
}
###
GET {{HOST}}/users
###
# @name login
//POST {{HOST}}/login
POST http://localhost:5001/login
{
  "username": "wilder00",
  "password": "password"
}

{{
  // post request script
  exports.authorization = response.headers['authorization'];
}}

HTTP/1.1 200  - OK
vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
x-content-type-options: nosniff
x-xss-protection: 0
cache-control: no-cache, no-store, max-age=0, must-revalidate
pragma: no-cache
expires: 0
x-frame-options: DENY
content-type: application/json;charset=UTF-8
content-length: 353
date: Sun, 11 Feb 2024 06:29:41 GMT
connection: close
###
# @name loginRoleUser
//POST {{HOST}}/login
POST http://localhost:5001/login
{
  "username": "user_test",
  "password": "password"
}
###
# @ref login
GET {{HOST}}/products
Authorization:{{authorization}}
###
#GET {{HOST}}/users
GET http://localhost:5001/api/users
//Authorization:{{authorization}}
###
# @forceRef login
GET {{HOST}}/file-items
Authorization:Bearer {{login.token}}
###
# @forceRef loginRoleUser
GET {{HOST}}/folders
Authorization:Bearer {{loginRoleUser.token}}
###
# @forceRef login
POST {{HOST}}/file-items
Authorization:Bearer {{login.token}}
Content-Type: multipart/form-data; boundary=WebKitFormBoundary

--WebKitFormBoundary
Content-Disposition: form-data; name="name"

Wilder-Trujillo-cv
--WebKitFormBoundary
Content-Disposition: form-data; name="title"

invoice_title
--WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="Wilder-Trujillo-cv.pdf"
Content-Type: application/pdf

< ./try-file/Wilder-Trujillo-cv.pdf
--WebKitFormBoundary--
###
# @forceRef login
GET {{HOST}}/folders/4/files
Authorization:Bearer {{login.token}}
###
# @forceRef login
GET {{HOST}}/folders/3/folders
Authorization:Bearer {{login.token}}
###
# @forceRef login
GET {{HOST}}/folders/4
Authorization:Bearer {{login.token}}